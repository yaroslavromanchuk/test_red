(function(e){e.fn.jSnow=function(t){function w(){r=e("html").width();if(!d){i=window.innerHeight||document.documentElement.clientHeight;i-=50}else i=d}function E(t,n){t=t||1;n=n||false;var s=0;for(s=0;s<t;s++){var h=e("<span />");var d=a+Math.floor(Math.random()*f);var v=o[Math.floor(Math.random()*o.length)];if(v.indexOf(".gif")!=-1||v.indexOf(".png")!=-1){var m=new Image;if(g)v=v.replace("png","gif");m.src=v;v="<img src='"+v+"' alt='jSnowFlake'>"}h.html(v).css({color:u[Math.floor(Math.random()*u.length)],fontSize:d+"px",display:"block",position:"absolute",cursor:"default","z-index":p});e(y).append(h);f_left=Math.floor(Math.random()*(r-h.width()-50))+25;f_top=n?-1*h.height():Math.floor(Math.random()*(i-50));var w=Math.floor(Math.random()*90);jQuery.data(h,"posData",{top:f_top,left:f_left,rad:Math.random()*50,i:Math.ceil(l+Math.random()*(c-l)),swingRange:w});h.css({top:f_top+"px",left:f_left+"px"});b.push(h)}}function S(){var e=0;for(e=b.length-1;e>=0;e--){var t=b[e];var n=jQuery.data(t,"posData");n.top+=n.i;var r=Number();r=Math.cos(n.rad/180*Math.PI);n.rad+=2;var s=n.left-r*n.swingRange;if(v){op=i-n.top<100?(i-n.top)/100:1;t.css("opacity",op)}t.css({top:n.top+"px",left:s+"px"});if(n.top>i){jQuery.removeData(t);t.remove();b.splice(e,1);E(1,true)}}}var n=e.extend({},e.fn.jSnow.defaults,t);var r,i;var s=n.flakes;var o=n.flakeCode;var u=n.flakeColor;var a=n.flakeMinSize;var f=n.flakeMaxSize;var l=n.fallingSpeedMin;var c=n.fallingSpeedMax;var h=n.interval;var p=n.zIndex;var d=n.vSize;var v=n.fadeAway;var m=n.followScroll;w();var g=false;if(e.browser.msie&&parseFloat(e.browser.version)<8)g=true;if(e.browser.msie&&parseFloat(e.browser.version)<8&&p=="auto")p=0;var y=e("<div />");y.css({width:r+"px",height:1,display:"block",overflow:"visible",position:"fixed",left:"1px",zIndex:p});if(m){y.css("top",e("html").scrollTop()+1+"px")}else{y.css="1px"}e("body").prepend(y).css({height:"100%"});e("html").css({"overflow-y":"scroll","overflow-x":"hidden"});var b=Array();E(s,false);setInterval(S,h);window.onresize=w;if(m){window.onscroll=function(){y.css({top:e("html").scrollTop()+"px"})}}return this};e.fn.jSnow.defaults={flakes:30,fallingSpeedMin:1,fallingSpeedMax:3,flakeMaxSize:20,flakeMinSize:10,flakeCode:["&bull;"],flakeColor:["#fff"],zIndex:"auto",interval:50}})(jQuery)